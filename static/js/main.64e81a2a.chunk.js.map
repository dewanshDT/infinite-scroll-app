{"version":3,"sources":["store.js","components/BackBtn.jsx","components/ContentBlock.jsx","components/Content.jsx","components/Image.jsx","App.js","index.js"],"names":["useStore","create","set","rawJSON","currentItem","pageNumber","loading","scrollPosition","addJSON","JSON","state","map","data","setJSON","setCurrentItem","item","setPageNumber","number","setLoading","bool","setScrollPosition","num","BackBtn","func","className","onClick","focusable","role","xmlns","viewBox","fill","d","ContentBlock","index","lastElementRef","length","history","useHistory","push","id","ref","alt_description","src","urls","small","Content","json","contentList","useRef","observer","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prvPgNo","observe","addEventListener","scrollTop","useEffect","scroll","Image","useParams","regular","App","a","axios","get","res","console","log","results","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.64e81a2a.chunk.js","sourcesContent":["import create from \"zustand\";\r\n\r\nconst useStore = create((set) => ({\r\n  rawJSON: [],\r\n  currentItem: {},\r\n  pageNumber: 1,\r\n  loading: false,\r\n  scrollPosition: 0,\r\n  addJSON: (JSON) => set((state) => ({ rawJSON: [...state.rawJSON, JSON.map((data) => data)] })),\r\n  setJSON: (JSON) => set((state) => ({ rawJSON: JSON })),\r\n  setCurrentItem: (item) => set((state) => ({ currentItem: item })),\r\n  setPageNumber: (number) => set((state) => ({ pageNumber: number })),\r\n  setLoading: (bool) => set((state) => ({ loading: bool })),\r\n  setScrollPosition: (num) => set((state) => ({ scrollPosition: num })),\r\n}));\r\n\r\nexport default useStore;\r\n","import React from \"react\";\r\n\r\nconst BackBtn = ({func}) => {\r\n  return (\r\n  <div className=\"arrow-btn\" onClick={func}>\r\n      <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>\r\n  </div>\r\n  )\r\n};\r\n\r\nexport default BackBtn;\r\n","import React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport useStore from \"../store\";\r\n\r\nconst ContentBlock = ({ item, index, lastElementRef, length }) => {\r\n  const history = useHistory();\r\n  const setCurrentItem = useStore(state => state.setCurrentItem);\r\n  \r\n  const onClick = (item) => {\r\n    setCurrentItem(item);\r\n    history.push(`/image/${item.id}`);\r\n  }\r\n\r\n  if (index + 1 === length)\r\n    return (\r\n        <div className=\"image\" key={index} ref={lastElementRef} onClick={() => onClick(item)}>\r\n          <h4>{item.alt_description}</h4>\r\n          <img src={item.urls.small} />\r\n        </div>\r\n    );\r\n  else\r\n    return (\r\n        <div className=\"image\" key={index} onClick={() => onClick(item)}>\r\n          <h4>{item.alt_description}</h4>\r\n          <img src={item.urls.small} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContentBlock;\r\n","import React, { useRef, useCallback, useEffect } from \"react\";\r\nimport useStore from \"../store\";\r\nimport BackBtn from \"./BackBtn\";\r\nimport ContentBlock from \"./ContentBlock\";\r\n\r\nconst Content = () => {\r\n  const json = useStore((state) => state.rawJSON);\r\n  const setPageNumber = useStore((state) => state.setPageNumber);\r\n  const loading = useStore((state) => state.loading);\r\n  const setScrollPosition = useStore(state => state.setScrollPosition);\r\n  const scrollPosition = useStore(state => state.scrollPosition);\r\n  const contentList = useRef();\r\n\r\n  // observer --->\r\n  const observer = useRef();\r\n  const lastElementRef = useCallback((node) => {\r\n    if (loading) return;\r\n    if (observer.current) observer.current.disconnect();\r\n    observer.current = new IntersectionObserver((entries) => {\r\n      if (entries[0].isIntersecting) {\r\n        setPageNumber((prvPgNo) => prvPgNo + 1);\r\n      }\r\n    });\r\n    if (node) observer.current.observe(node);\r\n  });\r\n\r\n  const scrollUp = () => {\r\n    contentList.current.scroll(0, 0);\r\n  };\r\n\r\n  // for setting scroll position\r\n  contentList.current && contentList.current.addEventListener(\"scroll\", () => {\r\n    setScrollPosition(contentList.current.scrollTop);\r\n  })\r\n\r\n  useEffect(() => {\r\n    contentList.current.scrollTop = scrollPosition;\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <h1>Infinite Scroll</h1>\r\n      <div className=\"content-box\">\r\n        <BackBtn func={scrollUp} />\r\n        <div className=\"content-list\" ref={contentList}>\r\n          {json.map((item, index) => {\r\n            return (\r\n              <ContentBlock\r\n                item={item}\r\n                key={index}\r\n                index={index}\r\n                length={json.length}\r\n                lastElementRef={lastElementRef}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      <h4>\r\n        Infinite scroll example, by Dewansh. Images loaded via unsplash api\r\n      </h4>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import React from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport BackBtn from \"./BackBtn\";\nimport useStore from \"../store\";\n\nconst Image = () => {\n  const { id } = useParams();\n  const currentItem = useStore((state) => state.currentItem);\n  const history = useHistory();\n\n  const back = () => {\n    history.push(\"/\");\n  };\n\n  return (\n    <div className=\"image-container\">\n      <BackBtn func={back} />\n      here's your id {id}\n      <img src={currentItem.urls ? currentItem.urls.regular : \"\"} />\n    </div>\n  );\n};\n\nexport default Image;\n","import \"./App.css\";\nimport Content from \"./components/Content\";\nimport Image from \"./components/Image\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  useHistory,\n} from \"react-router-dom\";\nimport React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport useStore from \"./store\";\n\nfunction App() {\n  const pageNumber = useStore((state) => state.pageNumber);\n  const setLoading = useStore((state) => state.setLoading);\n  const json = useStore((state) => state.rawJSON);\n  const setJSON = useStore((state) => state.setJSON);\n\n  useEffect(async () => {\n    setLoading(true);\n    try {\n      // I directly gave the client id and secrete here, but I would be making a production version of this app I would most probably use environment variables to store them.\n      const res = await axios.get(\n        `https://api.unsplash.com/search/photos?page=${pageNumber}&query=office&client_id=MrsptAEkuNtiOj9sakWFD9PmsE7roU5qo4Zub6CQgSk&client_secret=F19zKmUGoRQy1QY-FfEodfvh6jKPORIaDZLM7GHL_Nw`\n      );\n      console.log(res.data);\n      if (json) setJSON([...json, ...res.data.results]);\n      else setJSON(res.data.results);\n      console.log(\"images loaded 📷\");\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n    }\n  }, [pageNumber]);\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/image/:id\">\n          <Image />\n        </Route>\n        <Route path=\"/\">\n          <Content />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}